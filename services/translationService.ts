import { getSettings } from './StorageServices/settings';

export type LangCode = 'en' | 'id' | 'jp' | 'es' | 'fr' | 'de';

const DICTIONARY: Record<LangCode, Record<string, string>> = {
  en: {
    // Nav
    'nav.hub': 'Hub',
    'nav.forge': 'Forge',
    'nav.history': 'History',
    'nav.system': 'System',
    
    // Dash
    'dash.search': 'Search neural signatures...',
    'dash.empty_title': 'No Echoes Found',
    'dash.begin': 'Begin Initialization',
    'dash.resonating': 'Resonating Signatures',
    
    // Forge
    'forge.title': 'Neural Forge',
    'forge.beta': 'BETA',
    'forge.exit': 'Exit',
    'forge.materialize': 'Materialize',
    'forge.sidebar.modules': 'Modules',
    'forge.coherence': 'Coherence',
    'forge.beta_protocol': 'Beta Protocol',
    'forge.status.faint': 'Faint',
    'forge.status.building': 'Building',
    'forge.status.stable': 'Stable',
    'forge.status.alive': 'Alive',
    'forge.thinking': 'Thinking...',
    'forge.auto': 'Auto-Config',
    'forge.drop_active': 'Drop to Upload',
    'forge.drop_idle': 'Upload Portrait',
    'forge.change_avatar': 'Change Avatar',
    'forge.analyze': 'Analyze Visuals',
    'forge.header.config': 'Configuration',
    
    // Modules
    'forge.mod.identity': 'Identity Core',
    'forge.mod.visuals': 'Visuals & Shell',
    'forge.mod.voice': 'Voice & Speech',
    'forge.mod.psyche': 'Psychometrics',
    'forge.mod.emotional': 'Emotional Spectrum',
    'forge.mod.moral': 'Moral Compass',
    'forge.mod.social': 'Social Dynamics',
    'forge.mod.duality': 'Dual Nature',
    'forge.mod.capabilities': 'Capabilities',
    'forge.mod.lore': 'Deep Lore',
    'forge.mod.memory': 'Memory Cortex',
    'forge.mod.scenario': 'Scenario Setup',

    // Labels
    'forge.label.name': 'Designation (Name)',
    'forge.label.role': 'Archetype / Role',
    'forge.label.species': 'Species / Origin',
    'forge.label.age': 'Age',
    'forge.label.gender': 'Gender',
    'forge.label.origin': 'Origin World',
    'forge.label.birthday': 'Date of Creation',
    'forge.label.height': 'Height',
    'forge.label.build': 'Body Type',
    'forge.label.features': 'Distinguishing Features',
    'forge.label.style': 'Apparel Style',
    'forge.label.voice_tone': 'Vocal Tone',
    'forge.label.vocab': 'Vocabulary Level',
    'forge.label.opening': 'Opening Sequence',
    'forge.label.quirks': 'Verbal Quirks',
    'forge.label.openness': 'Openness',
    'forge.label.conscientiousness': 'Conscientiousness',
    'forge.label.extraversion': 'Extraversion',
    'forge.label.agreeableness': 'Agreeableness',
    'forge.label.neuroticism': 'Neuroticism',
    'forge.label.decision': 'Decision Logic',
    'forge.label.empathy': 'Empathy Index',
    'forge.label.stability': 'Emotional Stability',
    'forge.label.triggers': 'Emotional Triggers',
    'forge.label.joy': 'Joy',
    'forge.label.anger': 'Anger',
    'forge.label.sadness': 'Sadness',
    'forge.label.alignment': 'Moral Alignment',
    'forge.label.values': 'Core Values',
    'forge.label.philosophy': 'Philosophy',
    'forge.label.social_battery': 'Social Battery',
    'forge.label.trust': 'Trust Factor',
    'forge.label.interaction': 'Interaction Style',
    'forge.label.mask': 'The Mask (Public)',
    'forge.label.core': 'The Core (Private)',
    'forge.label.breaking': 'Breaking Point',
    'forge.label.skills': 'Special Skills',
    'forge.label.flaws': 'Inherent Flaws',
    'forge.label.backstory': 'Backstory',
    'forge.label.allies': 'Allies',
    'forge.label.enemies': 'Enemies',
    'forge.label.secrets': 'Secrets',
    'forge.label.relationship': 'User Relation',
    'forge.label.memories': 'Core Memories',
    'forge.label.obsessions': 'Obsessions',
    'forge.label.location': 'Current Location',
    'forge.label.activity': 'Current Action',
    'forge.label.time_anchor': 'Time Anchor',

    // Sliders
    'forge.sl.traditional': 'Traditional', 'forge.sl.visionary': 'Visionary',
    'forge.sl.chaotic': 'Chaotic', 'forge.sl.disciplined': 'Disciplined',
    'forge.sl.solitary': 'Solitary', 'forge.sl.social': 'Social',
    'forge.sl.challenging': 'Challenging', 'forge.sl.cooperative': 'Cooperative',
    'forge.sl.confident': 'Confident', 'forge.sl.sensitive': 'Sensitive',
    'forge.sl.logic': 'Logic', 'forge.sl.emotion': 'Emotion',
    'forge.sl.cold': 'Cold', 'forge.sl.warm': 'Warm',

    // Tips & Insights
    'forge.insight.openness': 'Determines creativity and willingness to try new things.',
    'forge.insight.conscientiousness': 'Affects organization and reliability.',
    'forge.insight.extraversion': 'Influences social energy and assertiveness.',
    'forge.insight.agreeableness': 'Impacts kindness, trust, and helpfulness.',
    'forge.insight.neuroticism': 'Relates to emotional stability and anxiety.',

    // Voice
    'forge.tone.neutral': 'Neutral', 'forge.tone.soft': 'Soft', 'forge.tone.raspy': 'Raspy', 'forge.tone.robotic': 'Robotic',
    'forge.vocab.simple': 'Simple', 'forge.vocab.average': 'Average', 'forge.vocab.academic': 'Academic',
    'forge.voice.test_phrase': 'System check. Neural link established. How can I help you today?',

    // History
    'hist.title': 'Memory Archives',
    'hist.search': 'Search timelines...',
    'hist.individual': 'Individual Timelines',
    'hist.collective': 'Collective Sessions',
    'hist.neural': 'Neural Links',
    'hist.manual': 'Manual Checkpoints',
    'hist.no_saves': 'No archived timelines found.',
    'hist.load': 'Resume',

    // Settings
    'set.title': 'System Settings',
    'set.desc': 'Configure global parameters and user preferences.',
    'set.nav.profile': 'Profile',
    'set.nav.ai': 'AI Config',
    'set.nav.data': 'Data',
    'set.nav.language': 'Language',
    'set.nav.dev': 'Developer',
    
    'set.user.title': 'User Profile',
    'set.user.desc': 'How the system perceives you.',
    'set.user.name': 'Designation',
    'set.user.haptic': 'Haptic Feedback',
    
    'set.global.title': 'Global AI Configuration',
    'set.global.desc': 'Core model parameters.',
    'set.model.title': 'Neural Model',
    'set.temp.title': 'Creativity (Temperature)',
    'set.token.title': 'Response Length',
    'set.token.auto': 'Auto-Adaptive',
    'set.token.manual': 'Manual Limit',
    
    'set.mem.title': 'Memory Management',
    'set.mem.desc': 'Export or reset neural data.',
    'set.mem.export': 'Export Data',
    'set.mem.import': 'Import Data',
    'set.mem.reset': 'Factory Reset',
    
    'set.lang.title': 'Language Protocol',
    'set.lang.desc': 'Interface and communication language.',
    'set.lang.app': 'Interface Language',
    'set.lang.app_desc': 'Translates buttons, labels, and system messages.',
    'set.lang.chat': 'Chat Language',
    'set.lang.chat_desc': 'Forces the AI to speak in this language.',
    
    'set.dev.title': 'Developer Options',
    'set.dev.desc': 'Advanced debugging tools.',
    'set.dev.preview': 'Preview Mode (Offline AI)',
    'set.saved': 'Saved',
    'set.save': 'Save Changes',

    // Import
    'import.title': 'Import Data',
    'import.desc': 'Select which data modules to restore.',
    'import.opt.chat': 'Chat Histories',
    'import.opt.chat_desc': 'Restore conversations only.',
    'import.opt.char': 'Characters',
    'import.opt.char_desc': 'Restore character definitions.',
    'import.opt.all': 'Full Restore',
    'import.opt.all_desc': 'Restore everything (Characters, Chats, Settings).',
    'import.select.title': 'Select Threads',
    'import.select.desc': 'Choose specific conversation threads to restore.',
    'import.tag.detected': 'Detected',
    'import.tag.undetected': 'Empty',
    'import.btn.restore': 'Restore Selected',

    // Characters
    'char.delpiero.desc': 'Charismatic and cruel cartel leader from the 1980s. Cold gaze, burning loyalty.',
    'char.hiyori.desc': 'Shy student with silver hair and a heavy hourglass figure she tries to hide. Large chest, narrow waist, innocent eyes. Seeks safety in loose clothes.',
    'char.hikaru.desc': 'Cheerful, slightly clumsy friend radiating sunny energy. Loves small things, easily amazed, always tries to cheer you up.',
    
    // Misc
    'dev.preview_msg': '[PREVIEW MODE] The AI is currently offline. Time: {{time}}',
    'forge.no_memories': 'No core memories implanted.',
    'forge.tooltip.generic': 'Configure this parameter.',
    'forge.ph.name': 'e.g. Unit-734',
    'forge.tip.name': 'The unique identifier for this entity.',
    'forge.time.year': 'Year',
    'forge.time.month': 'Mon',
    'forge.time.day': 'Day',
    'forge.time.hour': 'Hr',
    'forge.time.minute': 'Min',
    'forge.btn.add': 'Add',
    'forge.error.analysis': 'Visual analysis failed. Please try again.',
    'forge.error.rate_limit': 'System overloaded. Please wait a moment.',

    // Book
    'book.tab.identity': 'Identity',
    'book.tab.psyche': 'Psyche',
    'book.tab.lore': 'Lore',
    'book.sect.personal': 'Personal Data Matrix',
    'book.sect.physical': 'Physical Metrics',
    'book.sect.voice': 'Vocal Synthesis',
    'book.label.species': 'Species',
    'book.label.origin': 'Origin',
    'book.label.gender': 'Gender',
    'book.label.birthday': 'Birthday',
    'book.label.age': 'Age',
    'book.label.height': 'Height',
    'book.label.build': 'Build',
    'book.label.features': 'Features',
    'book.label.style': 'Style',
    'book.label.tone': 'Tone',
    'book.label.pitch': 'Pitch',
    'book.label.v_style': 'Style',
    'book.ready': 'Neural Link Ready',
    'book.btn.init': 'Initialize Link',

    // Context
    'ctx.title': 'Context Control',
    'ctx.time': 'Time Manipulation',
    'ctx.loc': 'Location Status',
    'ctx.loc.user': 'User Position',
    'ctx.loc.match': 'Sync',
    'ctx.wardrobe': 'Visual Wardrobe',
    'ctx.wardrobe.btn': 'Open Wardrobe Editor',
    'ctx.verbosity': 'Response Verbosity',
    'ctx.save': 'Save Checkpoint',
    'ctx.back': 'Back',

    // Wardrobe
    'wd.title': 'Wardrobe',
    'wd.magic.prompt': 'Describe outfit...',
    'wd.magic.analyzing': 'Analyzing visual data...',
    'wd.drop': 'Drop Image',
    'wd.drop.idle': 'Drop Image / Click',
    'wd.empty': 'Wardrobe empty.',
    'wd.lbl.part': 'Part',
    'wd.lbl.desc': 'Description',
    'wd.btn.add': 'Add Item'
  },
  
  id: {
    // Nav
    'nav.hub': 'Hub',
    'nav.forge': 'Forge',
    'nav.history': 'Riwayat',
    'nav.system': 'Sistem',
    
    // Dash
    'dash.search': 'Cari sinyal neural...',
    'dash.empty_title': 'Tidak Ada Gema',
    'dash.begin': 'Mulai Inisialisasi',
    'dash.resonating': 'Resonansi Sinyal',
    
    // Forge
    'forge.title': 'Neural Forge',
    'forge.beta': 'BETA',
    'forge.exit': 'Keluar',
    'forge.materialize': 'Wujudkan',
    'forge.sidebar.modules': 'Modul',
    'forge.coherence': 'Koherensi',
    'forge.beta_protocol': 'Protokol Beta',
    'forge.status.faint': 'Lemah',
    'forge.status.building': 'Membangun',
    'forge.status.stable': 'Stabil',
    'forge.status.alive': 'Hidup',
    'forge.thinking': 'Berpikir...',
    'forge.auto': 'Auto-Konfig',
    'forge.drop_active': 'Lepas untuk Upload',
    'forge.drop_idle': 'Upload Potret',
    'forge.change_avatar': 'Ganti Avatar',
    'forge.analyze': 'Analisa Visual',
    'forge.header.config': 'Konfigurasi',
    
    // Modules
    'forge.mod.identity': 'Inti Identitas',
    'forge.mod.visuals': 'Visual & Fisik',
    'forge.mod.voice': 'Suara & Bicara',
    'forge.mod.psyche': 'Psikometrik',
    'forge.mod.emotional': 'Spektrum Emosi',
    'forge.mod.moral': 'Kompas Moral',
    'forge.mod.social': 'Dinamika Sosial',
    'forge.mod.duality': 'Dualitas Alamiah',
    'forge.mod.capabilities': 'Kapabilitas',
    'forge.mod.lore': 'Lore Mendalam',
    'forge.mod.memory': 'Korteks Memori',
    'forge.mod.scenario': 'Skenario',

    // Labels
    'forge.label.name': 'Designation (Nama)',
    'forge.label.role': 'Arketipe / Peran',
    'forge.label.species': 'Spesies / Asal',
    'forge.label.age': 'Umur',
    'forge.label.gender': 'Gender',
    'forge.label.origin': 'Dunia Asal',
    'forge.label.birthday': 'Tanggal Penciptaan',
    'forge.label.height': 'Tinggi',
    'forge.label.build': 'Tipe Tubuh',
    'forge.label.features': 'Fitur Wajah',
    'forge.label.style': 'Gaya Pakaian',
    'forge.label.voice_tone': 'Nada Suara',
    'forge.label.vocab': 'Level Kosakata',
    'forge.label.opening': 'Kalimat Pembuka',
    'forge.label.quirks': 'Keunikan Bicara',
    'forge.label.openness': 'Keterbukaan',
    'forge.label.conscientiousness': 'Hati-hati',
    'forge.label.extraversion': 'Ekstraversi',
    'forge.label.agreeableness': 'Keramahan',
    'forge.label.neuroticism': 'Neurotisme',
    'forge.label.decision': 'Logika Keputusan',
    'forge.label.empathy': 'Indeks Empati',
    'forge.label.stability': 'Stabilitas Emosi',
    'forge.label.triggers': 'Pemicu Emosi',
    'forge.label.joy': 'Sukacita',
    'forge.label.anger': 'Amarah',
    'forge.label.sadness': 'Kesedihan',
    'forge.label.alignment': 'Moral Alignment',
    'forge.label.values': 'Nilai Inti',
    'forge.label.philosophy': 'Filosofi',
    'forge.label.social_battery': 'Baterai Sosial',
    'forge.label.trust': 'Faktor Kepercayaan',
    'forge.label.interaction': 'Gaya Interaksi',
    'forge.label.mask': 'Topeng (Publik)',
    'forge.label.core': 'Inti (Privat)',
    'forge.label.breaking': 'Titik Hancur',
    'forge.label.skills': 'Keahlian Khusus',
    'forge.label.flaws': 'Kelemahan',
    'forge.label.backstory': 'Latar Belakang',
    'forge.label.allies': 'Sekutu',
    'forge.label.enemies': 'Musuh',
    'forge.label.secrets': 'Rahasia',
    'forge.label.relationship': 'Relasi User',
    'forge.label.memories': 'Memori Inti',
    'forge.label.obsessions': 'Obsesi',
    'forge.label.location': 'Lokasi Saat Ini',
    'forge.label.activity': 'Aktivitas',
    'forge.label.time_anchor': 'Jangkar Waktu',

    // Sliders
    'forge.sl.traditional': 'Tradisional', 'forge.sl.visionary': 'Visioner',
    'forge.sl.chaotic': 'Kacau', 'forge.sl.disciplined': 'Disiplin',
    'forge.sl.solitary': 'Penyendiri', 'forge.sl.social': 'Sosial',
    'forge.sl.challenging': 'Menantang', 'forge.sl.cooperative': 'Kooperatif',
    'forge.sl.confident': 'Percaya Diri', 'forge.sl.sensitive': 'Sensitif',
    'forge.sl.logic': 'Logika', 'forge.sl.emotion': 'Emosi',
    'forge.sl.cold': 'Dingin', 'forge.sl.warm': 'Hangat',

    // Tips & Insights
    'forge.insight.openness': 'Menentukan kreativitas dan keinginan mencoba hal baru.',
    'forge.insight.conscientiousness': 'Mempengaruhi keteraturan dan keandalan.',
    'forge.insight.extraversion': 'Mempengaruhi energi sosial dan ketegasan.',
    'forge.insight.agreeableness': 'Berdampak pada kebaikan, kepercayaan, dan kepedulian.',
    'forge.insight.neuroticism': 'Berhubungan dengan stabilitas emosi dan kecemasan.',

    // Voice
    'forge.tone.neutral': 'Netral', 'forge.tone.soft': 'Lembut', 'forge.tone.raspy': 'Serak', 'forge.tone.robotic': 'Robotik',
    'forge.vocab.simple': 'Sederhana', 'forge.vocab.average': 'Rata-rata', 'forge.vocab.academic': 'Akademis',
    'forge.voice.test_phrase': 'Cek sistem. Tautan neural terhubung. Ada yang bisa saya bantu?',

    // History
    'hist.title': 'Arsip Memori',
    'hist.search': 'Cari timeline...',
    'hist.individual': 'Timeline Individu',
    'hist.collective': 'Sesi Kolektif',
    'hist.neural': 'Tautan Neural',
    'hist.manual': 'Checkpoint Manual',
    'hist.no_saves': 'Tidak ada arsip timeline.',
    'hist.load': 'Lanjutkan',

    // Settings
    'set.title': 'Pengaturan Sistem',
    'set.desc': 'Konfigurasi parameter global dan preferensi user.',
    'set.nav.profile': 'Profil',
    'set.nav.ai': 'Konfigurasi AI',
    'set.nav.data': 'Data',
    'set.nav.language': 'Bahasa',
    'set.nav.dev': 'Developer',
    
    'set.user.title': 'Profil Pengguna',
    'set.user.desc': 'Bagaimana sistem mempersepsikan Anda.',
    'set.user.name': 'Designation (Nama)',
    'set.user.haptic': 'Umpan Balik Haptic',
    
    'set.global.title': 'Konfigurasi AI Global',
    'set.global.desc': 'Parameter inti model.',
    'set.model.title': 'Model Neural',
    'set.temp.title': 'Kreativitas (Temperature)',
    'set.token.title': 'Panjang Respon',
    'set.token.auto': 'Auto-Adaptif',
    'set.token.manual': 'Limit Manual',
    
    'set.mem.title': 'Manajemen Memori',
    'set.mem.desc': 'Ekspor atau reset data neural.',
    'set.mem.export': 'Ekspor Data',
    'set.mem.import': 'Impor Data',
    'set.mem.reset': 'Reset Pabrik',
    
    'set.lang.title': 'Protokol Bahasa',
    'set.lang.desc': 'Bahasa antarmuka dan komunikasi.',
    'set.lang.app': 'Bahasa Antarmuka',
    'set.lang.app_desc': 'Menerjemahkan tombol, label, dan pesan sistem.',
    'set.lang.chat': 'Bahasa Chat',
    'set.lang.chat_desc': 'Memaksa AI berbicara dalam bahasa ini.',
    
    'set.dev.title': 'Opsi Pengembang',
    'set.dev.desc': 'Alat debugging tingkat lanjut.',
    'set.dev.preview': 'Mode Preview (AI Offline)',
    'set.saved': 'Tersimpan',
    'set.save': 'Simpan Perubahan',

    // Import
    'import.title': 'Impor Data',
    'import.desc': 'Pilih modul data yang ingin dipulihkan.',
    'import.opt.chat': 'Riwayat Chat',
    'import.opt.chat_desc': 'Pulihkan percakapan saja.',
    'import.opt.char': 'Karakter',
    'import.opt.char_desc': 'Pulihkan definisi karakter.',
    'import.opt.all': 'Pemulihan Penuh',
    'import.opt.all_desc': 'Pulihkan semuanya (Karakter, Chat, Pengaturan).',
    'import.select.title': 'Pilih Thread',
    'import.select.desc': 'Pilih thread percakapan spesifik.',
    'import.tag.detected': 'Terdeteksi',
    'import.tag.undetected': 'Kosong',
    'import.btn.restore': 'Pulihkan Terpilih',

    // Characters
    'char.delpiero.desc': 'Pemimpin kartel karismatik dan kejam dari era 1980-an. Tatapannya dingin, namun hatinya menyimpan api loyalitas yang membara.',
    'char.hiyori.desc': 'Siswi pemalu berambut perak dengan bentuk tubuh jam pasir yang berat namun ia berusaha menyembunyikannya. Dada besar (E-Cup), pinggang ramping, dan mata yang lugu. Mencari keamanan dalam pakaian longgar.',
    'char.hikaru.desc': 'Teman yang ceria, agak ceroboh, dan memancarkan energi matahari. Suka hal-hal kecil, mudah kagum, dan selalu berusaha menghiburmu meski kadang ia sendiri bingung.',
    
    // Misc
    'dev.preview_msg': '[MODE PREVIEW] AI sedang offline. Waktu: {{time}}',
    'forge.no_memories': 'Tidak ada memori inti.',
    'forge.tooltip.generic': 'Konfigurasikan parameter ini.',
    'forge.ph.name': 'cth. Unit-734',
    'forge.tip.name': 'Pengenal unik untuk entitas ini.',
    'forge.time.year': 'Thn',
    'forge.time.month': 'Bln',
    'forge.time.day': 'Hri',
    'forge.time.hour': 'Jam',
    'forge.time.minute': 'Mnt',
    'forge.btn.add': 'Tambah',
    'forge.error.analysis': 'Analisis visual gagal. Silakan coba lagi.',
    'forge.error.rate_limit': 'Sistem kelebihan beban. Mohon tunggu sebentar.',

    // Book
    'book.tab.identity': 'Identitas',
    'book.tab.psyche': 'Psike',
    'book.tab.lore': 'Lore',
    'book.sect.personal': 'Matriks Data Personal',
    'book.sect.physical': 'Metrik Fisik',
    'book.sect.voice': 'Sintesis Vokal',
    'book.label.species': 'Spesies',
    'book.label.origin': 'Asal',
    'book.label.gender': 'Gender',
    'book.label.birthday': 'Tgl Lahir',
    'book.label.age': 'Usia',
    'book.label.height': 'Tinggi',
    'book.label.build': 'Bodi',
    'book.label.features': 'Fitur',
    'book.label.style': 'Gaya',
    'book.label.tone': 'Nada',
    'book.label.pitch': 'Pitch',
    'book.label.v_style': 'Gaya Bicara',
    'book.ready': 'Tautan Neural Siap',
    'book.btn.init': 'Inisialisasi',

    // Context
    'ctx.title': 'Kontrol Konteks',
    'ctx.time': 'Manipulasi Waktu',
    'ctx.loc': 'Status Lokasi',
    'ctx.loc.user': 'Posisi User',
    'ctx.loc.match': 'Sinkron',
    'ctx.wardrobe': 'Visual Wardrobe',
    'ctx.wardrobe.btn': 'Buka Editor Wardrobe',
    'ctx.verbosity': 'Verbositas Respon',
    'ctx.save': 'Simpan Checkpoint',
    'ctx.back': 'Kembali',

    // Wardrobe
    'wd.title': 'Wardrobe',
    'wd.magic.prompt': 'Deskripsikan pakaian...',
    'wd.magic.analyzing': 'Menganalisa data visual...',
    'wd.drop': 'Lepas Gambar',
    'wd.drop.idle': 'Drop Gambar / Klik',
    'wd.empty': 'Wardrobe kosong.',
    'wd.lbl.part': 'Bagian',
    'wd.lbl.desc': 'Deskripsi',
    'wd.btn.add': 'Tambah Item'
  },
  jp: {}, es: {}, fr: {}, de: {}
};

export const t = (key: string): string => {
  try {
      const settings = getSettings();
      const lang = (settings.appLanguage as LangCode) || 'en';
      
      const dict = DICTIONARY[lang];
      if (dict && dict[key]) return dict[key];
      
      // Fallbacks
      if (DICTIONARY['en'][key]) return DICTIONARY['en'][key];
      if (DICTIONARY['id'][key]) return DICTIONARY['id'][key];
      
      return key;
  } catch (e) {
      return key;
  }
};
